<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Smooth Follow Pro</title>
    <style>
        body { margin: 0; background: #000; overflow: hidden; touch-action: none; font-family: sans-serif; }
        canvas { display: block; }
    </style>
</head>
<body>
    <canvas id="game"></canvas>
    <script>
        const canvas = document.getElementById('game');
        const ctx = canvas.getContext('2d');
        let w, h, player, obstacles, score, gameActive, frame;

        function init() {
            w = canvas.width = window.innerWidth;
            h = canvas.height = window.innerHeight;
            // Player अब उंगली को फॉलो करेगा
            player = { x: 80, y: h/2, size: 25, targetY: h/2 };
            obstacles = []; score = 0; frame = 0; gameActive = true;
        }

        function draw() {
            if (!gameActive) return;

            // Black Background
            ctx.fillStyle = '#050505'; ctx.fillRect(0, 0, w, h);

            // Smooth Movement: Player धीरे-धीरे उंगली की तरफ जाएगा
            let dy = player.targetY - player.y;
            player.y += dy * 0.15; // 0.15 से कंट्रोल बहुत स्मूथ हो जाता है

            // Player (Neon Cube)
            ctx.shadowBlur = 20; ctx.shadowColor = '#00ffff';
            ctx.fillStyle = '#00ffff';
            ctx.fillRect(player.x, player.y - player.size/2, player.size, player.size);
            ctx.shadowBlur = 0;

            // Obstacles
            if(frame % 70 === 0) {
                let gap = 160; 
                let pos = Math.random() * (h - gap - 100) + 50;
                obstacles.push({ x: w, y: pos, gap: gap, w: 50 });
            }

            obstacles.forEach((o, i) => {
                o.x -= (5 + (score/15));
                ctx.fillStyle = '#ff0055';
                ctx.shadowBlur = 15; ctx.shadowColor = '#ff0055';
                ctx.fillRect(o.x, 0, o.w, o.y);
                ctx.fillRect(o.x, o.y + o.gap, o.w, h);
                
                // Collision Detection
                if(player.x < o.x + o.w && player.x + player.size > o.x && (player.y - player.size/2 < o.y || player.y + player.size/2 > o.y + o.gap)) {
                    gameActive = false;
                    setTimeout(init, 1000);
                }
                if(o.x + o.w < 0) { obstacles.splice(i, 1); score++; }
            });

            // Score Display
            ctx.fillStyle = 'white'; ctx.font = 'bold 40px Arial';
            ctx.fillText(score, w/2, 60);
            
            frame++;
            requestAnimationFrame(draw);
        }

        // नया कंट्रोल सिस्टम: उंगली के साथ ऊपर-नीचे होना
        window.addEventListener('touchmove', (e) => {
            e.preventDefault();
            player.targetY = e.touches[0].clientY;
        }, { passive: false });

        window.addEventListener('touchstart', (e) => {
            player.targetY = e.touches[0].clientY;
        });

        init(); draw();
    </script>
</body>
</html>
